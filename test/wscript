#!/usr/bin/env python
import sys, os

os.environ['CXX'] = 'g++-4.7'

def options(opt):
    opt.load('g++')
    opt.load('boost')

def configure(cfg):
    cfg.load('g++')
    cfg.load('boost')

    cfg.check_boost(lib='serialization system thread', uselib_store='BOOST')

    cfg.env.CXXFLAGS_0TLTEST = [
            '-std=c++0x',
            '-g', '-O0',
            '-pedantic',
            '-Wall',
            '-Wextra',
            #'-D_GLIBCXX_PROFILE',
            #'-D_GLIBCXX_DEBUG',
            ]

    cfg.env.INCLUDES_0TLTEST = [ '../include', ]

    cfg.env.LIB_0TLTEST     = [ 'gtest', 'pthread']


def build(bld):

    tests = [
            "test_array.cc",
            "test_tree.cc",
            "test_pack.cc",
            "test_numeric.cc",
            ];

    bld(
        target          = 'main',
        features        = 'cxx cxxprogram',
        source          = ['main.cc',] + tests,
        use             = ['0TLTEST', 'BOOST'],
    )
